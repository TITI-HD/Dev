name: Supervision WordPress.com

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

env:
  SITE_URL: "https://oupssecuretest.wordpress.com"

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
      - name: Vérifier disponibilité du site
        run: curl -I -f $SITE_URL

      - name: Scanner le site avec WPScan
        uses: wpscanteam/wpscan-action@v1
        with:
          url: ${{ env.SITE_URL }}
          api_token: ${{ secrets.WPSCAN_API }}